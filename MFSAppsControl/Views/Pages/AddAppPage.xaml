<Page x:Class="MFSAppsControl.Views.Pages.AddAppPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:local="clr-namespace:MFSAppsControl.Views.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:models="clr-namespace:MFSAppsControl.Models"
    d:DataContext="{d:DesignInstance local:AddAppPage, IsDesignTimeCreatable=False}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    mc:Ignorable="d">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <ui:Button Icon="{ui:SymbolIcon ArrowLeft24}" Grid.Row="0" Click="Back" />
        <ui:TextBox Icon="{ui:SymbolIcon Search24}" Grid.Row="0" HorizontalAlignment="Right" Width="250" Text="{Binding ViewModel.SearchText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        <ListView
            x:Name="AppsListView"
            ItemsSource="{Binding ViewModel.FilteredAppsAvailable, Mode=OneWay}"
            SelectedItem="{Binding ViewModel.SelectedApp, Mode=TwoWay}"
            Grid.Row="1"
            Background="#0FFFFFFF"
            Margin="0,12,0,12"
            Foreground="White"
            UseLayoutRounding="True"
            BorderBrush="#11FFFFFF"
            SelectionMode="Single"
            MinHeight="290"
            MaxHeight="290">
            <ListView.ItemTemplate>
                <DataTemplate DataType="{x:Type models:ApplicationModel}">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Image Source="{Binding IconPath, Converter={StaticResource ExeIconToImageSourceConverter}}" Width="32" Height="32" Margin="0,0,12,0"/>
                        <TextBlock Margin="0,5,0,5" Text="{Binding Name}"/>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <Grid Grid.Row="2" Margin="0,0,0,12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <ui:Button Icon="{ui:SymbolIcon FolderAdd24}" Content="{Binding ViewModel.ButtonBrowseText}" d:Content="Browse"  Grid.Column="0" Appearance="Secondary" Command="{Binding ViewModel.BrowseCommand}" />
            <ui:TextBox PlaceholderText="Arguments..." Grid.Column="1" Margin="12,0" Text="{Binding ViewModel.Arguments, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
            <ui:Button Icon="{ui:SymbolIcon Add24}" Content="{Binding ViewModel.ButtonAddText}" d:Content="Add"  Grid.Column="2" Appearance="Primary" Command="{Binding ViewModel.AddSelectedAppCommand}" />
        </Grid>
    </Grid>
</Page>
